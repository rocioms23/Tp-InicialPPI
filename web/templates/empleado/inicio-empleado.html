<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../static/style/default.css">
    <link rel="stylesheet" href="../../static/style/empleado.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Mi Mipyme</title>
</head>

<body>
    <header class="barraSuperior w-full shadow-md">
        <div class=" w-full px-4 py-2 flex items-center justify-between">
            <h1 class="text-2xl font-bold text-gray-800 mx-2">Panel de MiPyme</h1>
            <h1 class="text-xl text-gray-600 mx-2">Empleados</h1>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="../empleado/"
                            class=" justify-center hover:text-gray-100 text-white bg-gray-800 rounded-xl px-2 py-1 transition-colors duration-300 active">Inicio</a>
                    </li>
                    <li><a href="/cerrarSesion" class="justify-center  hover:text-gray-800">Cerrar Sesión</a></li>
                </ul>
            </nav>
        </div>

    </header>
    <div class="contendorBotonToken">

        <button type="button" id="boton-inicioToken"
            class="token-btn text-white text-xl font-bold flex items-center justify-center mx-auto rounded-lg bg-gray-800 my-2 px-4 py-2">
            <img class="iconoToken w-7 h-7  " src="../../static/assets/icon/icono-token.png"
                alt="Generar token de acceso"></img>
            GENERAR TOKEN DE ACCESO</button>

    </div>
    <div class="infoAdmin my-4 mx-80 p-4 border rounded-lg shadow-md shadow-md flex flex-col">
        <h2 class="text-2xl font-bold ">Mis datos</h2>
        <div class="flex items-center mt-4">
            <img class="previewAdmin w-40 h-40 rounded-full mx-4"
                src="{{ url_for('empleado.static', filename=empleado.ruta_imagen_perfil.split('/')[-1]) }}"  alt="Foto de perfil">
                
            <div>
                <p id="nombreUsuario" class="text-xl font-bold">{{empleado.nombre}} {{empleado.apellido}}</p>
                <p id="rol" class="text-xl font-bold uppercase text-gray-700">{{empleado.nombre_rol}}</p>
                <p id="sectorUsuario" class="text-lg font-semibold text-gray-600">Sector: {{empleado.id_sector}} - {{empleado.nombre_sector}}</p>
                <p id="legajo" class="text-lg font-bold my-4">Legajo: {{empleado.legajo}}</p>
                <p id="correo" class="text-lg font-bold my-4 text-gray-600">{{empleado.correo}}</p>
            </div>
        </div>
    </div>
    <div class="empleados1 my-2 mx-32 p-4 border rounded-lg shadow-md shadow-md flex flex-col">
        <h2 class="text-2xl font-bold mb-4">Empleados de mi sector</h2>
        <table class="min-w-full bg-white">
            <thead>
                <tr>
                    <th class="py-2 px-4 border-b text-center">Foto</th>
                    <th class="py-2 px-4 border-b text-center">Nombre</th>
                    <th class="py-2 px-4 border-b text-center">Correo Electrónico</th>
                    <th class="py-2 px-4 border-b text-center">Rol</th>
                </tr>
            </thead>
            <tbody>
            {% for emp in empleados_del_sector %}
            
            <tr class="hover:bg-gray-100">
                <td class="py-2 px-4 border-b">
                    <img class="w-16 h-16 rounded-full mx-auto" 
                         src="{{ url_for('empleado.static', filename=emp.ruta_imagen.split('/')[-1]) }}" 
                         alt="Foto de {{ emp.nombre }}">
                </td>
                <td class="py-2 px-4 border-b text-center">{{ emp.nombre }} {{ emp.apellido }}</td>
                <td class="py-2 px-4 border-b text-center">{{ emp.correo }}</td>
                <td class="py-2 px-4 border-b text-center">{{ emp.nombre_rol }}</td>
            </tr>
            {% endfor %}
        </table>
        </h2>
    </div>
    <dialog id="tokenGenerado" class="rounded-2xl shadow-lg ">
        <div class="relative bg-white rounded-2xl shadow-lg p-8 w-[350px] flex flex-col items-center">
            <button id="cerrarToken"
                class="absolute top-3 right-3 bg-gray-800 text-white px-2 rounded-lg hover:text-gray-700 text-xl font-bold">x</button>
            <h2 class="text-2xl font-bold text-center mb-2">¡Token Generado<br>Exitosamente!</h2>
            <p id="token" class="text-5xl font-extrabold text-black my-2 tracking-widest">345 789</p>
            <div class="text-gray-700 text-base text-justify mb-2">
                Recuerde no compartir el código a nadie.<br>
                Ingreselo en la puerta del sector y despeje su rostro para que la verificación de identidad se lleve a
                cabo.<br>
                En caso de fallar diríjase a administración
            </div>
            <p class="text-lg font-bold text-red-600 mt-2">Válido por 10 minutos</p>
        </div>
    </dialog>
    <script>
        document.body.classList.add('slide-in-right');
    </script>
</body>
<script src="../../static/scripts/inicioEmpleado.js"></script>

</html>